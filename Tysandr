[{"name":"Utilities","type":"folder","desc":"Feel free to delete with impunity.","id":"QO-98gedy","is_open":true,"children":[{"name":"http.link","type":"trigger","patterns":["^[\\S\\s]*([Hh]ttps?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)?)[\\S\\s]*$"],"output":" Triggers.ignore(true)\n var url = matches[1]\n sub({\n   method: 'inline-substitution',\n   target: url,\n   output: '<a href=\"' + url + '\" target=\"_blank\">' + url + '</a>'\n })","id":"QO-x8h0sf"},{"name":"`js, Execute Javascript","type":"alias","patterns":["^`js[ ]+(.*)$"],"output":" var x = eval(matches[1])\n display(x)\n console.log(x)","id":"QO-g779a1"},{"name":"TIMEOUT","type":"trigger","patterns":["^You will TIMEOUT in 1 minute unless you do something\\.$"],"output":" Core.send(\"p nothing\")","id":"QO-ku1fgi"}]},{"name":"Samples","type":"folder","desc":"Feel free to also delete this with impunity.","id":"QO-4iqujy","is_open":true,"children":[{"name":"credit.summation","type":"trigger","patterns":["^([ ]+)(\\d+ credit)s* at (\\d+ gold) per credit\\.$"],"output":" credit.summation(matches)","id":"QO-16nh7r"},{"name":"credit.reset","type":"trigger","patterns":["^Credits currently available for purchase:$"],"output":" credit.reset()","id":"QO-as859n"},{"name":"credit","type":"script","output":"\ncredit = typeof credit != 'undefined' ? credit : {}\n\ncredit.reset = function() {\n  credit.collation = []\n  $('.credit-anchor')\n     .removeClass('credit-replaceable')\n     .removeAttr('onmouseover').removeAttr('onmouseout');\n}\ncredit.reset()\n\ncredit.summation = function(m) {\n  var comma  = Utilities.commaThis\n  var lpad   = Utilities.lpad\n  var rpad   = Utilities.rpad\n  \n  var number = parseInt(m[2].replace(/[^0-9]/g,''))\n  var cost   = parseInt(m[3].replace(/[^0-9]/g,''))\n\n  sub({\n    method: 'inline-substitution',\n    target: m[1],\n    output: '',\n  })\n  sub({\n    method: 'inline-substitution',\n    target: m[2],\n    output: '<span class=\"darkyellow\">' + lpad(comma(number), 9) + '</span> credit',\n  })\n  sub({\n    method: 'inline-substitution',\n    target: m[3],\n    output: '<span class=\"yellow\">' + lpad(comma(cost), 8) + '</span> gold',\n  })\n  \n  var cum = 0\n  var last = credit.collation[(credit.collation.length - 1)]\n  if (last) {\n    cum = number * cost + last.cum\n  } else { cum = number * cost }\n  credit.collation.push({number: number, cost: cost, sum: number * cost, cum: cum})\n  \n  var mode = 'hover'\n  var output  = '.'\n      output += '<span class=\"credit-anchor credit-replaceable\" '\n      if (mode == 'hover') {\n       output += 'onmouseover=\"credit.display(this, \\'' + (credit.collation.length - 1) + '\\')\" '\n       output += 'onmouseleave=\"credit.disguise()\">'\n      } else {\n       output += 'onmouseover=\"credit.show(this, \\'' + cum + '\\')\" '\n       output += 'onmouseleave=\"credit.hide()\">'\n      }\n      output += ' <span class=\"darkyellow\">'\n      output += lpad(comma(number * cost), 12)\n      output += '</span> gold</span>'\n  \n  sub({\n    method: 'inline-substitution',\n    target: '.',\n    output: output,\n  })\n}\n\ncredit.display = function(e, index) {\n  var comma  = Utilities.commaThis\n  var lpad   = Utilities.lpad\n  var len    = $('.credit-replaceable').length\n  for (var k = 0; k < (len-1); k++) {\n    var v  = credit.collation[k].sum\n    var el = $('.credit-replaceable')[k]\n        el.children[0].classList.remove('topaz', 'credit-cumulative')\n        el.children[0].classList.add('darkyellow')\n        el.children[0].innerHTML = lpad(comma(v), 12)\n  }\n  \n  for (var k = 0; k < (parseInt(index) + 1); k++) {\n    var v  = credit.collation[k].cum\n    var el = $('.credit-replaceable')[k]\n        el.children[0].classList.remove('darkyellow')\n        el.children[0].classList.add('topaz', 'credit-cumulative')\n        el.children[0].innerHTML = lpad(comma(v), 12)\n  }\n}\n\ncredit.disguise = function() {\n  var comma  = Utilities.commaThis\n  var lpad   = Utilities.lpad\n  \n  $('.credit-replaceable').each(function(index, el){\n    var v = credit.collation[index].sum\n    el.children[0].classList.remove('topaz', 'credit-cumulative')\n    el.children[0].classList.add('darkyellow')\n    el.children[0].innerHTML = lpad(comma(v), 12)\n  })\n}\n\ncredit.show = function(e, v) {\n  var comma   = Utilities.commaThis\n  var r       = e.getBoundingClientRect()\n  var offsetX = r.right + 13\n  var offsetY = r.top\n\n  var d  = ''\n      d += '<div class=\"credit-display\" style=\"font-family:\\'Lekton\\'; font-size:9pt;'\n      d += ' position: absolute; z-index: 44; left: ' + offsetX + 'px; top: ' + offsetY + 'px;'\n      d += ' height: 16px; width: auto; padding-left: 2px; '\n      d += ' background-color: rgba( 1, 1, 1, 0.88 ); border-radius: 3px;\"'\n      d += '><span class=\"darkyellow\">' + comma(v) + '</span><span class=\"mute\"> cum.</span>'\n      d += '</div>'\n  $('#container').append(d)\n}\n\ncredit.hide = function() {\n  $('.credit-display').remove()\n}\n","id":"QO-mym57l"},{"name":"shop.summative","type":"trigger","patterns":["^[ ]+(.+?) (.+?)[ ]+(\\d+)[ ]+(\\d+)gp$"],"output":"\nvar comma  = Utilities.commaThis\nvar lpad   = Utilities.lpad\n\nvar count = matches[3]\nvar price = matches[4]\n\nappend('<span class=\"topaz\">' + lpad(comma(count * price), 11) + '</span> <span class=\"mute\">gold</span>')\n","id":"QO-g3rjc4"}]}]